<script type="text/javascript"> 
	function setupRealTimeTranslate() {


var $searchBox = $('#search-translations');
var $browseDivs = $('.search-data a');
var $browseCols = $('.search-data .search-row');

$searchBox.on('input', function() {
  var scope = this;
  if (!scope.value || scope.value == '') {
    //$browseDivs.show();
    $browseDivs.removeClass('d-none');
    $browseCols.removeClass('d-none');
    return;
  }

  $browseDivs.each(function(i, div) {
    var $div = $(div);
    let divText = $div.text()
    console.log(divText)
    //$div.toggle($div.text().toLowerCase().indexOf(scope.value.toLowerCase()) > -1);
    if($div.text().toLowerCase().indexOf(scope.value.toLowerCase()) > -1)
    {
    	$div.removeClass('d-none')
    }
    else {
    	$div.addClass('d-none')
    }
  })

   $browseCols.each(function(i, div) {
    var $div = $(div);
    let divText = $div.text()
    console.log('inside browseCols')
    console.log(divText)
    //$div.toggle($div.text().toLowerCase().indexOf(scope.value.toLowerCase()) > -1);
    if($div.text().toLowerCase().indexOf(scope.value.toLowerCase()) > -1)
    {
    	$div.removeClass('d-none')
    }
    else {
    	$div.addClass('d-none')
    }
  })
  

});

}

jQuery(document).ready(function($) {
	setupRealTimeTranslate()
})

</script>

<% refresh = false if local_assigns[:refresh].nil? %>
<% title = "Translations" if local_assigns[:title].nil? %>
<% show_add = true if local_assigns[:show_add].nil? %>

<% show_sub_menu = true if local_assigns[:show_sub_menu].nil? %>
<% load_sub_menu = true if local_assigns[:load_sub_menu].nil? %>

<h4 class="d-flex justify-content-between align-items-center"><div><%= title %> <%= link_to "Add", feedbacker.new_translate_key_path, class: "btn btn-sm btn-primary text-light" if show_add %></div>
	<form method="get" action="<%= feedbacker.translates_search_path %>">
	    <input type="text" name="q" value="<%= @q %>" class="form-control-sm" id="search-translations"/>
	</form>
</h4>

<h6 class="d-flex align-items-center bg-light text-dark p-1 px-2 border rounded-top fs-8 mt-0 mb-1">Filter by <%= tag.span @tdomain || @q, class: "fs-6 fw-bold text-primary mx-1" if @tdomain || @q %> <%= link_to "X", feedbacker.translates_path({tdomain:nil}), class:"nodec text-danger mx-1" if @tdomain || @q %>

<%= link_to icon_text('',"edit"), feedbacker.translate_keys_path, class: "ms-auto text-dark" %>
	</h6>

<% if show_sub_menu %>
	<%= render(partial: "#{engine_prefix}translate_keys/parts/tdomain_filters",locals: {refresh:refresh,tdomain:@tdomain}) if load_sub_menu %>
	<%= tag.div("", id: "subMenu", style:"min-height:70px;", class: "bg-white border rounded p-1 mb-1") if !load_sub_menu %>
<% end %>


  <% if false && @tdomain %>
  <div class="d-flex align-items-center justify-content-between">
  <div>Filtered by <%= tag.span @tdomain, class: "bg-primary active-u mx-1 p-1 px-2 text-white fw-bold rounded" %></div> <%= link_to "Show all", feedbacker.translate_keys_path({tdomain:nil}), class: "btn btn-sm btn-secondary" %>
  </div>

  <% end %>
